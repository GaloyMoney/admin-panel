(this["webpackJsonpadmin-dashboard"]=this["webpackJsonpadmin-dashboard"]||[]).push([[0],{74:function(e,t,n){},90:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(27),r=n.n(c),s=(n(74),n(11)),o=n(17),i=n(105),l=n(108),u=n(28),j=n(14),d=n(26);function b(e){return e.length>10&&e.length<=15}function h(e){return 6===e.length}function O(e){return e.length>=3}function g(e,t,n,a){return!!(isFinite(n)&&Math.abs(n)<=90)&&(!!(isFinite(a)&&Math.abs(a)<=180)&&(!!O(e)&&t.length>=3))}var x=function(){sessionStorage.clear(),window.location.href="/"},v=n(53),m=n(44),p=n(62),f=n(63),S=n(2);var C,$,y=function(){return Object(S.jsx)(v.a,{bg:"dark",variant:"dark",children:Object(S.jsxs)(p.a,{children:[Object(S.jsx)(v.a.Brand,{href:"https://bitcoinbeach.com",children:Object(S.jsx)(f.a,{src:"/BBLogo.png",rounded:!0})}),Object(S.jsx)(m.a,{className:"mr-auto",children:Object(S.jsx)(m.a.Link,{href:"/dashboard",children:"Home"})}),Object(S.jsx)(m.a,{children:Object(S.jsx)(j.a,{onClick:x,variant:"dark",children:"Logout"})})]})})},E=(n(90),Object(i.a)(C||(C=Object(o.a)(["\n  mutation requestPhoneCode($phone: String!) {\n    requestPhoneCode(phone: $phone) {\n      success\n    }\n  }\n"])))),D=Object(i.a)($||($=Object(o.a)(["\n  mutation login($phone: String!, $otp: Int!) {\n    login(phone: $phone, code: $otp) {\n      token\n    }\n  }\n"])));function k(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),o=Object(s.a)(r,2),i=o[0],O=o[1],g=Object(a.useState)(""),x=Object(s.a)(g,2),v=x[0],m=x[1];var p=Object(l.a)(E,{onCompleted:function(e){e.requestPhoneCode.success;O(!0)},onError:function(e){console.error(e),alert(e.message)}}),f=Object(s.a)(p,2),C=f[0],$=f[1].loading;var k=Object(l.a)(D,{onCompleted:function(e){var t=e.login.token;t||alert("Incorrect OTP"),function(e){sessionStorage.setItem("token",e)}(t),Object(u.navigate)("/dashboard",!0)},onError:function(e){console.error(e.message)}}),L=Object(s.a)(k,1)[0];return Object(S.jsxs)("div",{children:[Object(S.jsx)(y,{}),Object(S.jsxs)("div",{className:"Login",children:[!i&&Object(S.jsxs)(d.a,{onSubmit:function(e){e.preventDefault(),C({variables:{phone:n}})},children:[Object(S.jsx)(d.a.Group,{size:"lg",children:Object(S.jsx)(d.a.Control,{autoFocus:!0,type:"tel",placeholder:"Enter phone number",value:n,onChange:function(e){return c(e.target.value)}})}),Object(S.jsx)(j.a,{block:!0,size:"lg",type:"submit",disabled:!b(n),children:"Login"})]}),$&&Object(S.jsx)("p",{children:"Loading..."}),i&&Object(S.jsxs)(d.a,{onSubmit:function(e){e.preventDefault(),L({variables:{phone:n,otp:parseInt(v)}})},children:[Object(S.jsx)(d.a.Group,{size:"lg",children:Object(S.jsx)(d.a.Control,{autoFocus:!0,type:"number",placeholder:"Enter OTP",value:v,onChange:function(e){return m(e.target.value)}})}),Object(S.jsx)(j.a,{block:!0,size:"lg",type:"submit",disabled:!h(v),children:"Submit"})]})]})]})}var L=n(33),T=n(16);function A(){return Object(S.jsxs)("div",{children:[Object(S.jsx)(y,{}),Object(S.jsx)(p.a,{fluid:!0,style:{marginTop:"50px"},children:Object(S.jsxs)(L.a,{className:"justify-content-md-center",children:[Object(S.jsx)(T.a,{md:"auto",children:Object(S.jsx)(j.a,{size:"lg",href:"/dashboard/userDetails",children:"User Details"})}),Object(S.jsx)(T.a,{md:"auto",children:Object(S.jsx)(j.a,{size:"lg",href:"/dashboard/addToMap",children:"Add Business To Map"})})]})})]})}var I,_,z,F,B,P=n(54),U=n(107),w=n(66),R=Object(i.a)(I||(I=Object(o.a)(["\n  query getUid($phone: String, $username: String) {\n    getUid(phone: $phone, username: $username)\n  }\n"]))),G=Object(i.a)(_||(_=Object(o.a)(["\n  query getUserDetails($uid: ID!) {\n    getUserDetails(uid: $uid) {\n      id\n      phone\n      username\n      created_at\n      level\n      coordinate {\n        latitude\n        longitude\n      }\n      title\n      created_at\n      status\n    }\n  }\n"]))),M=Object(i.a)(z||(z=Object(o.a)(["\n  mutation setAccountStatus($uid: ID!, $status: AccountStatus!) {\n    setAccountStatus(uid: $uid, status: $status) {\n        status\n        id\n        __typename\n    }\n  }\n"]))),N=Object(i.a)(F||(F=Object(o.a)(["\n  query getLevels {\n    getLevels\n  }\n"]))),q=Object(i.a)(B||(B=Object(o.a)(["\n  mutation setlevel($uid: ID!, $level: Int!) {\n    setLevel(uid: $uid, level: $level) {\n      id,\n      level\n    }\n  }\n"])));var H,K=function(){var e=sessionStorage.getItem("token"),t=Object(a.useState)(""),n=Object(s.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(""),i=Object(s.a)(o,2),u=i[0],h=i[1],g=Object(a.useState)(null),x=Object(s.a)(g,2),v=x[0],m=x[1],f=Object(a.useState)(""),C=Object(s.a)(f,2),$=C[0],E=C[1],D=Object(a.useState)(""),k=Object(s.a)(D,2),A=k[0],I=k[1],_=Object(U.a)(R,{context:{headers:{Authorization:"Bearer ".concat(e)}},onCompleted:function(e){var t=e.getUid;h(t),K({variables:{uid:t}})}}),z=Object(s.a)(_,2),F=z[0],B=(z[1].loading,Object(U.a)(G,{context:{headers:{Authorization:"Bearer ".concat(e)}},onCompleted:function(e){var t=e.getUserDetails;I(t),Q()},onError:function(e){alert(e.message),E(""),r("")}})),H=Object(s.a)(B,2),K=H[0],W=H[1].loading,J=Object(U.a)(N,{context:{headers:{Authorization:"Bearer ".concat(e)}},onCompleted:function(e){var t=e.getLevels;m(t)}}),Q=Object(s.a)(J,1)[0],V=Object(l.a)(q,{context:{headers:{Authorization:"Bearer ".concat(e)}},onCompleted:function(e){var t=e.setLevel;I(Object(P.a)(Object(P.a)({},A),{},{level:t.level})),alert("".concat(A.username,"'s account level has been changed successfully"))},onError:function(e){console.error(e),alert(e.message)}}),X=Object(s.a)(V,1)[0],Y=Object(l.a)(M,{context:{headers:{Authorization:"Bearer ".concat(e)}},onCompleted:function(e){e.setAccountStatus;alert("".concat(A.username,"'s account status has been changed successfully"))},onError:function(e){console.error(e),alert(e.message)}}),Z=Object(s.a)(Y,1)[0];return Object(S.jsxs)("div",{children:[Object(S.jsx)(y,{}),Object(S.jsxs)(p.a,{fluid:!0,children:[Object(S.jsx)("br",{}),Object(S.jsxs)(L.a,{className:"justify-content-md-center",children:[Object(S.jsx)(T.a,{md:"auto",children:Object(S.jsx)(d.a,{inline:!0,onSubmit:function(e){e.preventDefault(),F({variables:{phone:c}})},children:Object(S.jsxs)(d.a.Group,{children:[Object(S.jsx)(d.a.Control,{type:"tel",placeholder:"Enter user's phone number",value:c,onChange:function(e){return r(e.target.value)}}),Object(S.jsx)(j.a,{type:"submit",disabled:!b(c),children:"Submit"})]})})}),Object(S.jsx)(T.a,{md:"auto",children:Object(S.jsx)(d.a,{inline:!0,onSubmit:function(e){e.preventDefault(),F({variables:{username:$}})},children:Object(S.jsxs)(d.a.Group,{children:[Object(S.jsx)(d.a.Control,{placeholder:"Enter user's username",value:$,onChange:function(e){return E(e.target.value)}}),Object(S.jsx)(j.a,{type:"submit",disabled:!O($),children:"Submit"})]})})})]}),Object(S.jsxs)(L.a,{children:[W&&Object(S.jsx)(T.a,{md:"auto",children:"Getting user details..."}),A&&Object(S.jsxs)(w.a,{bordered:!0,hover:!0,striped:!0,style:{margin:"15px"},children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"Phone"}),Object(S.jsx)("th",{children:"Username"}),Object(S.jsx)("th",{children:"Title"}),Object(S.jsx)("th",{children:"Latitude"}),Object(S.jsx)("th",{children:"Longtitude"}),Object(S.jsx)("th",{children:"Created At"}),Object(S.jsx)("th",{children:"Level"}),Object(S.jsx)("th",{children:"Status"})]})}),Object(S.jsx)("tbody",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:A.phone}),Object(S.jsx)("td",{children:A.username}),Object(S.jsx)("td",{children:A.title}),Object(S.jsx)("td",{children:A.coordinate?A.coordinate.latitude:""}),Object(S.jsx)("td",{children:A.coordinate?A.coordinate.longitude:""}),Object(S.jsx)("td",{children:new Date(parseInt(A.created_at)).toString()}),Object(S.jsxs)("td",{children:[A.level," ",Object(S.jsx)(j.a,{variant:"outline-danger",disabled:A.level===(null===v||void 0===v?void 0:v[v.length-1]),size:"sm",onClick:function(){var e=null===v||void 0===v?void 0:v[v.indexOf(A.level)+1];X({variables:{uid:u,level:e}})},children:"Upgrade"})," "]}),Object(S.jsxs)("td",{children:[A.status," ",Object(S.jsx)(j.a,{variant:"outline-danger",size:"sm",onClick:function(){var e="active"===A.status?"locked":"active";window.confirm("Clicking OK will change ".concat(A.phone,"'s status to ").concat(e,". Do you wish to proceed?"))&&Z({variables:{uid:u,status:e}})},children:"Change"})," "]})]})})]})]})]})]})},W=Object(i.a)(H||(H=Object(o.a)(["\n  mutation addToMap($username: String!, $title: String!, $latitude: Float!, $longitude: Float!) {\n    addToMap(username: $username, title: $title, latitude: $latitude, longitude: $longitude)\n  }\n"])));var J=function(){var e=sessionStorage.getItem("token"),t=Object(a.useState)(""),n=Object(s.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(""),i=Object(s.a)(o,2),u=i[0],b=i[1],h=Object(a.useState)(""),O=Object(s.a)(h,2),x=O[0],v=O[1],m=Object(a.useState)(""),f=Object(s.a)(m,2),C=f[0],$=f[1],E=Object(l.a)(W,{context:{headers:{Authorization:"Bearer ".concat(e)}},onCompleted:function(){alert("Added successfully!"),A()},onError:function(e){alert(e.message)}}),D=Object(s.a)(E,2),k=D[0],A=(D[1].loading,function(){[v,$,b,r].forEach((function(e){return e("")}))});return Object(S.jsxs)("div",{children:[Object(S.jsx)(y,{}),Object(S.jsxs)(p.a,{fluid:!0,children:[Object(S.jsx)("br",{}),Object(S.jsx)(L.a,{className:"justify-content-md-center",children:Object(S.jsx)(T.a,{md:"auto",children:Object(S.jsx)(d.a,{onSubmit:function(e){e.preventDefault(),k({variables:{username:u,title:c,latitude:parseFloat(x),longitude:parseFloat(C)}})},children:Object(S.jsxs)(d.a.Group,{children:[Object(S.jsx)(d.a.Control,{placeholder:"Enter username",value:u,onChange:function(e){return b(e.target.value)}}),Object(S.jsx)(d.a.Control,{placeholder:"Enter title",value:c,onChange:function(e){return r(e.target.value)}}),Object(S.jsx)(d.a.Control,{placeholder:"Enter latitude",value:x,onChange:function(e){return v(e.target.value)}}),Object(S.jsx)(d.a.Control,{placeholder:"Enter longitude",value:C,onChange:function(e){return $(e.target.value)}}),Object(S.jsx)(j.a,{type:"submit",disabled:!g(u,c,x,C),children:"Submit"})]})})})})]})]})},Q={"/":function(){return Object(S.jsx)(k,{})},"/dashboard*":function(){return Object(S.jsx)(X,{})}},V={"/":function(){return Object(S.jsx)(A,{})},"/userDetails":function(){return Object(S.jsx)(K,{})},"/addToMap":function(){return Object(S.jsx)(J,{})}},X=function(){var e=Object(u.useRoutes)(V);return sessionStorage.getItem("token")||Object(u.navigate)("/"),e};var Y=function(){return Object(u.useRoutes)(Q)||Object(S.jsx)(k,{})},Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,110)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},ee=n(104),te=n(106),ne=n(103),ae=new ee.a({uri:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).GRAPHQL_URI,cache:new te.a});r.a.render(Object(S.jsx)(ne.a,{client:ae,children:Object(S.jsx)(Y,{})}),document.getElementById("root")),Z()}},[[92,1,2]]]);
//# sourceMappingURL=main.62d6c592.chunk.js.map