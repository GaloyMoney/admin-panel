(this["webpackJsonpadmin-dashboard"]=this["webpackJsonpadmin-dashboard"]||[]).push([[0],{111:function(e,t,n){},113:function(e,t,n){"use strict";n.r(t);var a=n(72),r=n(0),s=n(40),c=n.n(s),i=(n(95),n(34)),o=n.n(i),l=n(44),u=n(16),d=n(28),j=n(125),b=n(128),h=n(41),O=n(17),p=n(38);function m(e){console.error(e),alert(e)}function x(e){return e.length>10&&e.length<=15}function g(e){return e.length>=3}function f(e){var t=e.walletName,n=e.title,a=e.latitude,r=e.longitude;return!!(isFinite(a)&&Math.abs(a)<=90)&&(!!(isFinite(r)&&Math.abs(r)<=180)&&(t.length>=3&&n.length>=3))}var v=function(){window.sessionStorage.clear(),window.location.href="/"},w=n(70),D=n(59),C=n(79),y=n(80),k=n(3);var S,N,E=function(){return Object(k.jsx)(w.a,{bg:"dark",variant:"dark",children:Object(k.jsxs)(C.a,{children:[Object(k.jsx)(w.a.Brand,{href:"https://bitcoinbeach.com",children:Object(k.jsx)(y.a,{src:"/BBLogo.png",rounded:!0})}),Object(k.jsx)(D.a,{className:"mr-auto",children:Object(k.jsx)(D.a.Link,{href:"/dashboard",children:"Home"})}),Object(k.jsx)(D.a,{children:Object(k.jsx)(O.a,{onClick:v,variant:"dark",children:"Logout"})})]})})},L=(n(111),Object(j.a)(S||(S=Object(d.a)(["\n  mutation userRequestAuthCode($input: UserRequestAuthCodeInput!) {\n    mutationData: userRequestAuthCode(input: $input) {\n      errors {\n        message\n      }\n      success\n    }\n  }\n"])))),I=Object(j.a)(N||(N=Object(d.a)(["\n  mutation login($input: UserLoginInput!) {\n    mutationData: userLogin(input: $input) {\n      errors {\n        message\n      }\n      authToken\n    }\n  }\n"])));function U(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(""),c=Object(u.a)(s,2),i=c[0],d=c[1],j=Object(r.useState)(!1),g=Object(u.a)(j,2),f=g[0],v=g[1],w=Object(b.a)(L),D=Object(u.a)(w,2),C=D[0],y=D[1].loading,S=Object(b.a)(I),N=Object(u.a)(S,2),U=N[0],A=N[1].loading,$=function(){function e(){return(e=Object(l.a)(o.a.mark((function e(t){var a,r,s,c,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,C({variables:{input:{phone:n}}});case 3:if(a=e.sent,r=a.error,s=a.data,!r){e.next=8;break}return e.abrupt("return",m(r.message));case 8:if(c=s.mutationData,i=c.errors,l=c.success,!(i.length>0)){e.next=11;break}return e.abrupt("return",m(i[0].message));case 11:l?v(!0):m("Could not execute operation");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(k.jsxs)(p.a,{onSubmit:function(t){return e.apply(this,arguments)},children:[Object(k.jsx)(p.a.Group,{size:"lg",children:Object(k.jsx)(p.a.Control,{autoFocus:!0,type:"tel",placeholder:"Enter phone number",value:n,onChange:function(e){return a(e.target.value)}})}),Object(k.jsx)(O.a,{block:!0,size:"lg",type:"submit",disabled:!x(n),children:"Login"})]})},T=function(){function e(){return(e=Object(l.a)(o.a.mark((function e(t){var a,r,s,c,l,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,U({variables:{input:{phone:n,code:i}}});case 3:if(a=e.sent,r=a.error,s=a.data,!r){e.next=8;break}return e.abrupt("return",m(r.message));case 8:if(c=s.mutationData,l=c.errors,u=c.authToken,!(l.length>0)){e.next=11;break}return e.abrupt("return",m(l[0].message));case 11:u?(window.sessionStorage.setItem("token",u),Object(h.navigate)("/dashboard",!0)):m("Could not execute operation");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(k.jsxs)(p.a,{onSubmit:function(t){return e.apply(this,arguments)},children:[Object(k.jsx)(p.a.Group,{size:"lg",children:Object(k.jsx)(p.a.Control,{autoFocus:!0,type:"text",placeholder:"Enter Auth Code",value:i,onChange:function(e){return d(e.target.value)}})}),Object(k.jsx)(O.a,{block:!0,size:"lg",type:"submit",disabled:(t=i,!(6===t.length)),children:"Login"})]});var t};return Object(k.jsxs)("div",{children:[Object(k.jsx)(E,{}),Object(k.jsxs)("div",{className:"Login",children:[!f&&Object(k.jsx)($,{}),f&&Object(k.jsx)(T,{}),(y||A)&&Object(k.jsx)("p",{children:"Loading..."})]})]})}var A=n(46),$=n(24);function T(){return Object(k.jsxs)("div",{children:[Object(k.jsx)(E,{}),Object(k.jsx)(C.a,{fluid:!0,style:{marginTop:"50px"},children:Object(k.jsxs)(A.a,{className:"justify-content-md-center",children:[Object(k.jsx)($.a,{md:"auto",children:Object(k.jsx)(O.a,{size:"lg",href:"/dashboard/userDetails",children:"User Details"})}),Object(k.jsx)($.a,{md:"auto",children:Object(k.jsx)(O.a,{size:"lg",href:"/dashboard/addToMap",children:"Add Business To Map"})})]})})]})}var B,F,z,M,q=n(126),G=n(84),P=Object(j.a)(B||(B=Object(d.a)(["\n  query getUserDetails($phone: Phone!) {\n    userDetails: userDetailsByPhone(phone: $phone) {\n      id\n      phone\n      walletName\n      level\n      status\n      title\n      coordinates {\n        latitude\n        longitude\n      }\n      createdAt\n    }\n  }\n"]))),R=Object(j.a)(F||(F=Object(d.a)(["\n  query getUserDetails($walletName: WalletName!) {\n    userDetails: userDetailsByWalletName(walletName: $walletName) {\n      id\n      phone\n      walletName\n      level\n      status\n      title\n      coordinates {\n        latitude\n        longitude\n      }\n      createdAt\n    }\n  }\n"]))),W=Object(j.a)(z||(z=Object(d.a)(["\n  mutation userUpdateStatus($input: UserUpdateStatusInput!) {\n    mutationData: userUpdateStatus(input: $input) {\n      errors {\n        message\n      }\n      userDetails {\n        id\n        phone\n        walletName\n        level\n        status\n        title\n        coordinates {\n          latitude\n          longitude\n        }\n        createdAt\n      }\n    }\n  }\n"]))),J=Object(j.a)(M||(M=Object(d.a)(["\n  mutation userUpdateLevel($input: UserUpdateLevelInput!) {\n    mutationData: userUpdateLevel(input: $input) {\n      errors {\n        message\n      }\n      userDetails {\n        id\n        phone\n        walletName\n        level\n        status\n        title\n        coordinates {\n          latitude\n          longitude\n        }\n        createdAt\n      }\n    }\n  }\n"])));var K,V=function(){var e=r.useState(""),t=Object(u.a)(e,2),n=t[0],a=t[1],s=r.useState(""),c=Object(u.a)(s,2),i=c[0],o=c[1],l=r.useState(""),d=Object(u.a)(l,2),j=d[0],h=d[1],f=Object(q.a)(P,{onCompleted:function(e){var t=e.userDetails;h(t)},onError:function(e){m(e.message),a("")}}),v=Object(u.a)(f,2),w=v[0],D=v[1].loading,y=Object(q.a)(R,{onCompleted:function(e){var t=e.userDetails;h(t)},onError:function(e){m(e.message),o("")}}),S=Object(u.a)(y,2),N=S[0],L=S[1].loading,I=Object(b.a)(W,{onCompleted:function(e){var t=e.mutationData;h(t.userDetails),alert("".concat(j.walletName,"'s account level has been changed successfully"))},onError:function(e){console.error(e),alert(e.message)}}),U=Object(u.a)(I,1)[0],T=Object(b.a)(J,{onCompleted:function(e){var t=e.mutationData;h(t.userDetails),alert("".concat(j.walletName,"'s account status has been changed successfully"))},onError:function(e){console.error(e),alert(e.message)}}),B=Object(u.a)(T,1)[0];return Object(k.jsxs)("div",{children:[Object(k.jsx)(E,{}),Object(k.jsxs)(C.a,{fluid:!0,children:[Object(k.jsx)("br",{}),Object(k.jsxs)(A.a,{className:"justify-content-md-center",children:[Object(k.jsx)($.a,{md:"auto",children:Object(k.jsx)(p.a,{inline:!0,onSubmit:function(e){e.preventDefault(),w({variables:{phone:n}})},children:Object(k.jsxs)(p.a.Group,{children:[Object(k.jsx)(p.a.Control,{type:"tel",placeholder:"Enter user's phone number",value:n,onChange:function(e){return a(e.target.value)}}),Object(k.jsx)(O.a,{type:"submit",disabled:!x(n),children:"Submit"})]})})}),Object(k.jsx)($.a,{md:"auto",children:Object(k.jsx)(p.a,{inline:!0,onSubmit:function(e){e.preventDefault(),N({variables:{walletName:i}})},children:Object(k.jsxs)(p.a.Group,{children:[Object(k.jsx)(p.a.Control,{placeholder:"Enter user's wallet name",value:i,onChange:function(e){return o(e.target.value)}}),Object(k.jsx)(O.a,{type:"submit",disabled:!g(i),children:"Submit"})]})})})]}),Object(k.jsxs)(A.a,{children:[(D||L)&&Object(k.jsx)($.a,{md:"auto",children:"Getting user details..."}),j&&Object(k.jsxs)(G.a,{bordered:!0,hover:!0,striped:!0,style:{margin:"15px"},children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"Phone"}),Object(k.jsx)("th",{children:"Wallet Name"}),Object(k.jsx)("th",{children:"Title"}),Object(k.jsx)("th",{children:"Latitude"}),Object(k.jsx)("th",{children:"Longtitude"}),Object(k.jsx)("th",{children:"Created At"}),Object(k.jsx)("th",{children:"Level"}),Object(k.jsx)("th",{children:"Status"})]})}),Object(k.jsx)("tbody",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:j.phone}),Object(k.jsx)("td",{children:j.walletName}),Object(k.jsx)("td",{children:j.title}),Object(k.jsx)("td",{children:j.coordinates?j.coordinates.latitude:""}),Object(k.jsx)("td",{children:j.coordinates?j.coordinates.longitude:""}),Object(k.jsx)("td",{children:new Date(parseInt(j.createdAt)).toString()}),Object(k.jsxs)("td",{children:[j.level," ",Object(k.jsx)(O.a,{variant:"outline-danger",disabled:"TWO"===j.level,size:"sm",onClick:function(){B({variables:{input:{uid:j.id,level:"TWO"}}})},children:"Upgrade"})," "]}),Object(k.jsxs)("td",{children:[j.status," ",Object(k.jsx)(O.a,{variant:"outline-danger",size:"sm",onClick:function(){var e="ACTIVE"===j.status?"LOCKED":"ACTIVE";window.confirm("Clicking OK will change ".concat(j.phone,"'s status to ").concat(e,". Do you wish to proceed?"))&&U({variables:{input:{uid:j.id,status:e}}})},children:"Change"})," "]})]})})]})]})]})]})},H=Object(j.a)(K||(K=Object(d.a)(["\n  mutation businessUpdateMapInfo($input: BusinessUpdateMapInfoInput!) {\n    mutationData: businessUpdateMapInfo(input: $input) {\n      errors {\n        message\n      }\n      userDetails {\n        id\n      }\n    }\n  }\n"])));var Q=function(){var e=Object(b.a)(H),t=Object(u.a)(e,1)[0],n=function(){var e=Object(l.a)(o.a.mark((function e(n){var a,r,s,c,i,l,u,d,j,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r=n.target,s=r.walletName,c=r.title,i=r.longitude,l=r.latitude,f(u={walletName:s.value,title:c.value,longitude:parseFloat(i.value),latitude:parseFloat(l.value)})){e.next=6;break}return alert("Invalid input values"),e.abrupt("return");case 6:return e.next=8,t({variables:{input:u}});case 8:d=e.sent,j=d.data,(b=d.errors)||(null===j||void 0===j||null===(a=j.mutationData)||void 0===a?void 0:a.errors.length)>0?(console.error({errors:b,userErrors:j.mutationData.errors}),alert("Error adding merchant to map")):alert("Added successfully!"),s.value="",c.value="",i.value="",l.value="";case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{children:[Object(k.jsx)(E,{}),Object(k.jsxs)(C.a,{fluid:!0,children:[Object(k.jsx)("br",{}),Object(k.jsx)(A.a,{className:"justify-content-md-center",children:Object(k.jsx)($.a,{md:"auto",children:Object(k.jsx)(p.a,{onSubmit:n,children:Object(k.jsxs)(p.a.Group,{children:[Object(k.jsx)(p.a.Control,{placeholder:"Enter wallet name",name:"walletName"}),Object(k.jsx)(p.a.Control,{placeholder:"Enter title",name:"title"}),Object(k.jsx)(p.a.Control,{placeholder:"Enter latitude",name:"latitude"}),Object(k.jsx)(p.a.Control,{placeholder:"Enter longitude",name:"longitude"}),Object(k.jsx)(O.a,{type:"submit",children:"Submit"})]})})})})]})]})},X={"/":function(){return Object(k.jsx)(U,{})},"/dashboard*":function(){return Object(k.jsx)(Z,{})}},Y={"/":function(){return Object(k.jsx)(T,{})},"/userDetails":function(){return Object(k.jsx)(V,{})},"/addToMap":function(){return Object(k.jsx)(Q,{})}},Z=function(){var e=Object(h.useRoutes)(Y);return Boolean(window.sessionStorage.getItem("token"))||Object(h.navigate)("/"),e};var _=function(){return Object(h.useRoutes)(X)||Object(k.jsx)(U,{})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,129)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))},te=n(124),ne=n(123),ae=n(122),re=n(121),se=n(85),ce="https://graphql-admin.testnet.galoy.io/graphql";var ie=new te.a,oe=new ne.a({uri:ce,fetch:fetch}),le=Object(se.a)((function(e,t){var n=t.headers,r=window.sessionStorage.getItem("token");return{headers:Object(a.a)(Object(a.a)({},n),{},{Authorization:r?"Bearer ".concat(r):""})}})),ue=new ae.a({link:le.concat(oe),cache:ie});c.a.render(Object(k.jsx)(re.a,{client:ue,children:Object(k.jsx)(_,{})}),document.getElementById("root")),ee()},95:function(e,t,n){}},[[113,1,2]]]);
//# sourceMappingURL=main.f947387c.chunk.js.map