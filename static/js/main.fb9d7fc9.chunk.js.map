{"version":3,"sources":["utils/index.js","components/Header.js","components/Login.js","components/Dashboard.js","components/UserDetails.js","components/AddToMap.js","App.js","reportWebVitals.js","index.js"],"names":["validatePhone","phone","length","validateOtp","otp","validateUsername","username","validateAddToMapInputs","title","latitude","longitude","isFinite","Math","abs","logout","sessionStorage","clear","window","location","href","Header","Navbar","bg","variant","Container","Brand","Image","src","rounded","Nav","className","Link","Button","onClick","GENERATE_OTP","gql","LOGIN","Login","useState","setPhone","otpGenerated","setOtpGenerated","setOtp","useMutation","onCompleted","requestPhoneCode","success","Error","onError","error","console","alert","message","generateOTP","otpGenerating","loading","token","login","setItem","setAuthenticated","navigate","Form","onSubmit","event","preventDefault","variables","Group","size","Control","autoFocus","type","placeholder","value","onChange","e","target","block","disabled","parseInt","Dashboard","fluid","style","marginTop","Row","Col","md","GET_UID","GET_USER","SET_ACCOUNT_STATUS","GET_LEVELS","SET_LEVEL","UserDetails","getItem","React","uid","setUid","levels","setLevels","setUsername","userDetails","setUserDetails","useLazyQuery","context","headers","Authorization","getUid","getUser","getUserDetails","getLevels","gettingUser","setLevel","level","setAccountStatus","log","inline","Table","bordered","hover","striped","margin","coordinate","Date","created_at","toString","targetLevel","indexOf","status","targetStatus","confirm","ADD_TO_MAP","AddToMap","setTitle","setLatitude","setLongitude","resetValues","addToMap","forEach","state","parseFloat","routes","dashboardRoutes","AuthedPages","routeResult","useRoutes","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","client","ApolloClient","uri","env","GRAPHQL_URI","cache","InMemoryCache","ReactDOM","render","ApolloProvider","document","getElementById"],"mappings":"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","file":"static/js/main.fb9d7fc9.chunk.js","sourcesContent":["export function validatePhone(phone) {\n  return phone.length > 10 && phone.length <= 15\n}\n\nexport function validateOtp(otp) {\n  return otp.length === 6\n}\n\nexport function validateUsername(username) {\n  return username.length >= 3\n}\n\nexport function validateAddToMapInputs(username, title, latitude, longitude) {\n  //coordinate validation\n  if (!isFinite(latitude) || !(Math.abs(latitude) <= 90)) {\n    return false\n  }\n\n  if (!isFinite(longitude) || !(Math.abs(longitude) <= 180)) {\n    return false\n  }\n\n  if (!validateUsername(username)) {\n    return false\n  }\n\n  return title.length >= 3\n}\n\nexport const logout = () => {\n  sessionStorage.clear()\n  window.location.href = \"/\"\n}\n\nexport const isAuthenticated = () => {\n  return !!sessionStorage.getItem(\"token\")\n}\n","import React from \"react\"\nimport Navbar from \"react-bootstrap/Navbar\"\nimport Nav from \"react-bootstrap/Nav\"\nimport Container from \"react-bootstrap/Container\"\nimport Image from \"react-bootstrap/Image\"\nimport Button from \"react-bootstrap/Button\"\nimport { logout } from \"../utils\"\n\nfunction Header() {\n  return (\n    <Navbar bg=\"dark\" variant=\"dark\">\n      <Container>\n        <Navbar.Brand href=\"https://bitcoinbeach.com\">\n          <Image src={process.env.PUBLIC_URL + \"/BBLogo.png\"} rounded />\n        </Navbar.Brand>\n        <Nav className=\"mr-auto\">\n          <Nav.Link href=\"/dashboard\">Home</Nav.Link>\n        </Nav>\n        <Nav>\n          <Button onClick={logout} variant=\"dark\">\n            Logout\n          </Button>\n        </Nav>\n      </Container>\n    </Navbar>\n  )\n}\n\nexport default Header\n","import { gql, useMutation } from \"@apollo/client\"\nimport { navigate } from \"hookrouter\"\nimport React, { useState } from \"react\"\nimport Button from \"react-bootstrap/Button\"\nimport Form from \"react-bootstrap/Form\"\nimport { validateOtp, validatePhone } from \"../utils\"\nimport Header from \"./Header\"\nimport \"./Login.css\"\n\nconst GENERATE_OTP = gql`\n  mutation requestPhoneCode($phone: String!) {\n    requestPhoneCode(phone: $phone) {\n      success\n    }\n  }\n`\n\nconst LOGIN = gql`\n  mutation login($phone: String!, $otp: Int!) {\n    login(phone: $phone, code: $otp) {\n      token\n    }\n  }\n`\n\nexport default function Login() {\n  const [phone, setPhone] = useState(\"\")\n  const [otpGenerated, setOtpGenerated] = useState(false)\n  const [otp, setOtp] = useState(\"\")\n\n  function setAuthenticated(token) {\n    sessionStorage.setItem(\"token\", token)\n  }\n\n  const [generateOTP, { loading: otpGenerating }] = useMutation(GENERATE_OTP, {\n    onCompleted({ requestPhoneCode: { success } }) {\n      if (!success) {\n        throw new Error(\"Operation failed\")\n      }\n      setOtpGenerated(true)\n    },\n    onError(error) {\n      console.error(error)\n      alert(error.message)\n    },\n  })\n\n  function submitPhone(event) {\n    event.preventDefault()\n    generateOTP({ variables: { phone } })\n  }\n\n  const [login] = useMutation(LOGIN, {\n    onCompleted({ login: { token } }) {\n      if (!token) {\n        alert(\"Incorrect OTP\")\n      }\n      setAuthenticated(token)\n      navigate(\"/dashboard\", true)\n    },\n    onError(error) {\n      console.error(error.message)\n    },\n  })\n\n  function submitOtp(event) {\n    event.preventDefault()\n    login({ variables: { phone, otp: parseInt(otp) } })\n  }\n\n  return (\n    <div>\n      <Header />\n      <div className=\"Login\">\n        {!otpGenerated && (\n          <Form onSubmit={submitPhone}>\n            <Form.Group size=\"lg\">\n              <Form.Control\n                autoFocus\n                type=\"tel\"\n                placeholder=\"Enter phone number\"\n                value={phone}\n                onChange={(e) => setPhone(e.target.value)}\n              />\n            </Form.Group>\n            <Button block size=\"lg\" type=\"submit\" disabled={!validatePhone(phone)}>\n              Login\n            </Button>\n          </Form>\n        )}\n        {otpGenerating && <p>Loading...</p>}\n        {otpGenerated && (\n          <Form onSubmit={submitOtp}>\n            <Form.Group size=\"lg\">\n              <Form.Control\n                autoFocus\n                type=\"number\"\n                placeholder=\"Enter OTP\"\n                value={otp}\n                onChange={(e) => setOtp(e.target.value)}\n              />\n            </Form.Group>\n            <Button block size=\"lg\" type=\"submit\" disabled={!validateOtp(otp)}>\n              Submit\n            </Button>\n          </Form>\n        )}\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport { Container, Row } from \"react-bootstrap\"\nimport Button from \"react-bootstrap/Button\"\nimport Col from \"react-bootstrap/Col\"\nimport Header from \"./Header\"\n\nexport default function Dashboard() {\n  return (\n    <div>\n      <Header />\n      <Container fluid style={{ marginTop: \"50px\" }}>\n        <Row className=\"justify-content-md-center\">\n          <Col md=\"auto\">\n            <Button size=\"lg\" href=\"/dashboard/userDetails\">\n              User Details\n            </Button>\n          </Col>\n          <Col md=\"auto\">\n            <Button size=\"lg\" href=\"/dashboard/addToMap\">\n              Add Business To Map\n            </Button>\n          </Col>\n        </Row>\n      </Container>\n    </div>\n  )\n}\n","import { gql, useLazyQuery, useMutation } from \"@apollo/client\"\nimport * as React from \"react\"\nimport { Container, Form } from \"react-bootstrap\"\nimport Button from \"react-bootstrap/Button\"\nimport Col from \"react-bootstrap/Col\"\nimport Row from \"react-bootstrap/Row\"\nimport Table from \"react-bootstrap/Table\"\nimport { validatePhone, validateUsername } from \"../utils\"\nimport Header from \"./Header\"\n\nconst GET_UID = gql`\n  query getUid($phone: String, $username: String) {\n    getUid(phone: $phone, username: $username)\n  }\n`\n\nconst GET_USER = gql`\n  query getUserDetails($uid: ID!) {\n    getUserDetails(uid: $uid) {\n      id\n      phone\n      username\n      created_at\n      level\n      coordinate {\n        latitude\n        longitude\n      }\n      title\n      created_at\n      status\n    }\n  }\n`\n\nconst SET_ACCOUNT_STATUS = gql`\n  mutation setAccountStatus($uid: ID!, $status: AccountStatus!) {\n    setAccountStatus(uid: $uid, status: $status) {\n      status\n      id\n      __typename\n    }\n  }\n`\n\nconst GET_LEVELS = gql`\n  query getLevels {\n    getLevels\n  }\n`\n\nconst SET_LEVEL = gql`\n  mutation setlevel($uid: ID!, $level: Int!) {\n    setLevel(uid: $uid, level: $level) {\n      id\n      level\n    }\n  }\n`\n\nfunction UserDetails() {\n  const token = sessionStorage.getItem(\"token\")\n  const [phone, setPhone] = React.useState(\"\")\n  const [uid, setUid] = React.useState(\"\")\n  const [levels, setLevels] = React.useState(null)\n  const [username, setUsername] = React.useState(\"\")\n  const [userDetails, setUserDetails] = React.useState(\"\")\n\n  const [getUid] = useLazyQuery(GET_UID, {\n    context: {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    },\n    onCompleted({ getUid: uid }) {\n      setUid(uid)\n      getUser({ variables: { uid } })\n    },\n  })\n\n  const [getUser, { loading: gettingUser }] = useLazyQuery(GET_USER, {\n    context: {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    },\n    onCompleted({ getUserDetails }) {\n      setUserDetails(getUserDetails)\n      getLevels()\n    },\n    onError(error) {\n      alert(error.message)\n      setUsername(\"\")\n      setPhone(\"\")\n    },\n  })\n\n  const [getLevels] = useLazyQuery(GET_LEVELS, {\n    context: {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    },\n    onCompleted({ getLevels: levels }) {\n      setLevels(levels)\n    },\n  })\n\n  const [setLevel] = useMutation(SET_LEVEL, {\n    context: {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    },\n    onCompleted({ setLevel }) {\n      setUserDetails({ ...userDetails, level: setLevel.level })\n      alert(`${userDetails.username}'s account level has been changed successfully`)\n    },\n    onError(error) {\n      console.error(error)\n      alert(error.message)\n    },\n  })\n\n  const [setAccountStatus] = useMutation(SET_ACCOUNT_STATUS, {\n    context: {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    },\n    onCompleted({ setAccountStatus }) {\n      console.log({ setAccountStatus }) // TODO: What do we do with this?\n      alert(`${userDetails.username}'s account status has been changed successfully`)\n    },\n    onError(error) {\n      console.error(error)\n      alert(error.message)\n    },\n  })\n\n  function submitPhone(event) {\n    event.preventDefault()\n    getUid({ variables: { phone } })\n  }\n\n  function submitUsername(event) {\n    event.preventDefault()\n    getUid({ variables: { username } })\n  }\n\n  function changeAccountStatus() {\n    const targetStatus = userDetails.status === \"active\" ? \"locked\" : \"active\"\n    const confirmation = window.confirm(\n      `Clicking OK will change ${userDetails.phone}'s status to ${targetStatus}. Do you wish to proceed?`,\n    )\n    if (confirmation) {\n      setAccountStatus({ variables: { uid, status: targetStatus } })\n    }\n  }\n\n  function changeLevel() {\n    const targetLevel = levels?.[levels.indexOf(userDetails.level) + 1]\n    setLevel({ variables: { uid, level: targetLevel } })\n  }\n\n  return (\n    <div>\n      <Header />\n      <Container fluid>\n        <br />\n        <Row className=\"justify-content-md-center\">\n          <Col md=\"auto\">\n            <Form inline onSubmit={submitPhone}>\n              <Form.Group>\n                <Form.Control\n                  type=\"tel\"\n                  placeholder=\"Enter user's phone number\"\n                  value={phone}\n                  onChange={(e) => setPhone(e.target.value)}\n                />\n                <Button type=\"submit\" disabled={!validatePhone(phone)}>\n                  Submit\n                </Button>\n              </Form.Group>\n            </Form>\n          </Col>\n          <Col md=\"auto\">\n            <Form inline onSubmit={submitUsername}>\n              <Form.Group>\n                <Form.Control\n                  placeholder=\"Enter user's username\"\n                  value={username}\n                  onChange={(e) => setUsername(e.target.value)}\n                />\n                <Button type=\"submit\" disabled={!validateUsername(username)}>\n                  Submit\n                </Button>\n              </Form.Group>\n            </Form>\n          </Col>\n        </Row>\n        <Row>\n          {gettingUser && <Col md=\"auto\">Getting user details...</Col>}\n          {userDetails && (\n            <Table bordered hover striped style={{ margin: \"15px\" }}>\n              <thead>\n                <tr>\n                  <th>Phone</th>\n                  <th>Username</th>\n                  <th>Title</th>\n                  <th>Latitude</th>\n                  <th>Longtitude</th>\n                  <th>Created At</th>\n                  <th>Level</th>\n                  <th>Status</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr>\n                  <td>{userDetails.phone}</td>\n                  <td>{userDetails.username}</td>\n                  <td>{userDetails.title}</td>\n                  <td>{userDetails.coordinate ? userDetails.coordinate.latitude : \"\"}</td>\n                  <td>\n                    {userDetails.coordinate ? userDetails.coordinate.longitude : \"\"}\n                  </td>\n                  <td>{new Date(parseInt(userDetails.created_at)).toString()}</td>\n                  <td>\n                    {userDetails.level}{\" \"}\n                    <Button\n                      variant=\"outline-danger\"\n                      disabled={userDetails.level === levels?.[levels.length - 1]}\n                      size=\"sm\"\n                      onClick={changeLevel}\n                    >\n                      Upgrade\n                    </Button>{\" \"}\n                  </td>\n                  <td>\n                    {userDetails.status}{\" \"}\n                    <Button\n                      variant=\"outline-danger\"\n                      size=\"sm\"\n                      onClick={changeAccountStatus}\n                    >\n                      Change\n                    </Button>{\" \"}\n                  </td>\n                </tr>\n              </tbody>\n            </Table>\n          )}\n        </Row>\n      </Container>\n    </div>\n  )\n}\n\nexport default UserDetails\n","import { gql, useMutation } from \"@apollo/client\"\nimport * as React from \"react\"\nimport { Container, Form } from \"react-bootstrap\"\nimport Button from \"react-bootstrap/Button\"\nimport Col from \"react-bootstrap/Col\"\nimport Row from \"react-bootstrap/Row\"\nimport { validateAddToMapInputs } from \"../utils\"\nimport Header from \"./Header\"\n\nconst ADD_TO_MAP = gql`\n  mutation addToMap(\n    $username: String!\n    $title: String!\n    $latitude: Float!\n    $longitude: Float!\n  ) {\n    addToMap(\n      username: $username\n      title: $title\n      latitude: $latitude\n      longitude: $longitude\n    )\n  }\n`\n\nfunction AddToMap() {\n  const token = sessionStorage.getItem(\"token\")\n  const [title, setTitle] = React.useState(\"\")\n  const [username, setUsername] = React.useState(\"\")\n  const [latitude, setLatitude] = React.useState(\"\")\n  const [longitude, setLongitude] = React.useState(\"\")\n\n  const [addToMap] = useMutation(ADD_TO_MAP, {\n    context: {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    },\n    onCompleted() {\n      alert(\"Added successfully!\")\n      resetValues()\n    },\n    onError(error) {\n      alert(error.message)\n    },\n  })\n\n  const resetValues = () => {\n    const states = [setLatitude, setLongitude, setUsername, setTitle]\n    states.forEach((state) => state(\"\"))\n  }\n\n  const submit = (event) => {\n    event.preventDefault()\n\n    addToMap({\n      variables: {\n        username,\n        title,\n        latitude: parseFloat(latitude),\n        longitude: parseFloat(longitude),\n      },\n    })\n  }\n\n  return (\n    <div>\n      <Header />\n      <Container fluid>\n        <br />\n        <Row className=\"justify-content-md-center\">\n          <Col md=\"auto\">\n            <Form onSubmit={submit}>\n              <Form.Group>\n                <Form.Control\n                  placeholder=\"Enter username\"\n                  value={username}\n                  onChange={(e) => setUsername(e.target.value)}\n                />\n                <Form.Control\n                  placeholder=\"Enter title\"\n                  value={title}\n                  onChange={(e) => setTitle(e.target.value)}\n                />\n                <Form.Control\n                  placeholder=\"Enter latitude\"\n                  value={latitude}\n                  onChange={(e) => setLatitude(e.target.value)}\n                />\n                <Form.Control\n                  placeholder=\"Enter longitude\"\n                  value={longitude}\n                  onChange={(e) => setLongitude(e.target.value)}\n                />\n                <Button\n                  type=\"submit\"\n                  disabled={!validateAddToMapInputs(username, title, latitude, longitude)}\n                >\n                  Submit\n                </Button>\n              </Form.Group>\n            </Form>\n          </Col>\n        </Row>\n      </Container>\n    </div>\n  )\n}\n\nexport default AddToMap\n","import * as React from \"react\"\nimport Login from \"./components/Login\"\nimport { useRoutes, navigate } from \"hookrouter\"\nimport Dashboard from \"./components/Dashboard\"\nimport UserDetails from \"./components/UserDetails\"\nimport AddToMap from \"./components/AddToMap\"\nimport { isAuthenticated } from \"./utils\"\n\nconst routes = {\n  \"/\": () => <Login />,\n  \"/dashboard*\": () => <AuthedPages />,\n}\n\nconst dashboardRoutes = {\n  \"/\": () => <Dashboard />,\n  \"/userDetails\": () => <UserDetails />,\n  \"/addToMap\": () => <AddToMap />,\n}\n\nconst AuthedPages = () => {\n  const routeResult = useRoutes(dashboardRoutes)\n  if (!isAuthenticated()) {\n    navigate(\"/\")\n  }\n  return routeResult\n}\n\nfunction App() {\n  const routeResult = useRoutes(routes)\n\n  return routeResult || <Login />\n}\nexport default App\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./index.css\"\nimport App from \"./App\"\nimport reportWebVitals from \"./reportWebVitals\"\nimport { ApolloProvider, ApolloClient, InMemoryCache } from \"@apollo/client\"\n\nconst client = new ApolloClient({\n  uri: window.env.GRAPHQL_URI,\n  cache: new InMemoryCache(),\n})\n\nReactDOM.render(\n  <ApolloProvider client={client}>\n    <App />\n  </ApolloProvider>,\n  document.getElementById(\"root\"),\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}